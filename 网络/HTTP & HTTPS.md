# HTTP & HTTPS

## 1.HTTP

<img src="img/HTTP & HTTPS/202309261453368.png" alt="image-20220106232550783" style="zoom:33%;" />

<img src="img/HTTP & HTTPS/202309261453369.png" alt="image-20220106232648764" style="zoom: 33%;" />



## 2.HTTPS

HTTPS（Hypertext Transfer Protocol Secure）在 HTTP 基础上添加 TLS/SSL 加密（先 SSL，再 TLS），使通信不容易受到拦截和攻击，它使用混合加密，包括对称加密和非对称加密。通过非对称加密传输密钥，最后通过密钥进行对称加密传输数据。

1. **对称加密**

   对称加密使用相同的密钥（称为会话密钥），用于加密和解密通信的数据。这种加密算法的主要优点是速度较快，因为加密和解密使用相同的密钥。然而，密钥的安全分发可能是一个挑战。

2. **非对称加密**

   非对称加密使用一对密钥，分为公钥和私钥。公钥用于加密数据，而私钥用于解密数据。HTTPS 中的非对称加密通常用于建立安全的通信通道。服务器拥有私钥，而公钥是公开的。客户端使用服务器的公钥加密数据，只有服务器拥有相应的私钥才能解密它。

在 HTTPS 握手过程中，通常会**使用非对称加密来确保密钥的安全分发**。一旦安全通道建立，会话密钥就会**用对称加密算法对传输数据进行加密和解密**，以提高通信的效率。这种混合使用对称和非对称加密的方法能够充分发挥两者的优点，提供了安全且高效的通信机制。

### 2.1 密钥交换分发

通过非对称加密加密密钥时，首先需要获得服务器的公钥，然后用公钥把要传给服务端的对称加密的秘钥加密。但是这一步公钥是明文传输，可能会被查看到并替换：

<img src="img/HTTP & HTTPS/66c21bd455c8282b069d2d6ce39b8886.png" alt="66c21bd455c8282b069d2d6ce39b8886" style="zoom:67%;" />

此时就引入了 **CA 机构**。CA 机构那边也有一套公私钥，**服务端把自己的公钥给 CA，让 CA 用 CA 的私钥加密，然后返回加密结果**。然后这个加密结果，可以用 CA 的公钥解，谁都可以解开。但是，**如果要篡改结果，必须再次用 CA 的私钥加密**，可是这个做不到，只要 CA 不是坏蛋即可。这就做到了第一次的明文传输的公钥，**只能被看，无法被篡改**。后续即可生成对称加密的密钥。



<img src="img/HTTP & HTTPS/202309261453372.png" alt="image-20220106231017368" style="zoom: 33%;" />

### 2.2 对称密钥加解密

<img src="img/HTTP & HTTPS/202309261453370.png" alt="image-20220106230657614" style="zoom: 33%;" />

### 2.3 TLS握手过程

<img src="img/HTTP & HTTPS/202309261453373.png" style="zoom:50%;" />

使用对称和非对称加密算法：

<img src="img/HTTP & HTTPS/202309261453374.png" alt="image-20220106231934547" style="zoom: 50%;" />

